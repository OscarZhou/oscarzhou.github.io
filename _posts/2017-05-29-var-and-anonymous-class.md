---
title: "var and Anonymous Class"
date: 2017-05-29
category: C#
tags: [C#, MVC, Var, Anonymous Class]

---

## What is the implicitly typed variables?

The variable declared by the keyword "var" is implicitly typed variables. The type will be inferred by the compiler. The keyword "var" is the feature which is offered after .NET3.0.  
You can use it in many situations: the declaration of partial variables, for loop, foreach loop and using syntax.  

    static void Main(string[] args)
         {
             var stuName = "John";// The declaration of partial variables
             
             var stuList = new List<string>() {"Lily", "Kimy", "Geogre"}; // for loop
             for (var i = 0; i < 5; i++)  
             {
                 
             }
             
             foreach (var item in stuList) //foreach loop
             {
                 
             }
             
             using (var conn = new SqlConnection()) // using syntax
             {
                 
             }
         
             Console.ReadKey();
         }

Please noted that the variable should be assign a value when it is declared by var.  
 
## The grammer requirement
`var [the name of the variable] = [the value of the variable]`

## Syntactic sugar

In computer science, [syntactic sugar](https://en.wikipedia.org/wiki/Syntactic_sugar) is syntax within a programming language that is designed to make things easier to read or to express. It makes the language "sweeter" for human use: things can be expressed more clearly, more concisely, or in an alternative style that some may prefer.

There are many syntactic sugar in C#, such as object & collection initializers, automatic properties and anonymous types.  

***

## The features of the anonymous class
**1.** Encapsulate a set of readonly attributes into a single object. It is unnecessary to pre-define a type.  
**2.** The name of the class is generated by compiler and the type of each attributes is also inferred by compiler.  

## The grammar requirement
`new {attribute name 1 = attribute value 1, ... attribute name n = attribute value n}`

The example is like below:  

    static void Main(string[] args)
    {
        var student = new {StuId = 1001, StuName = "John", Age = 20};
        string info = string.Format("Student No:{0},Name:{1},Age:{2}", student.StuId, student.StuName, student.Age);
        Console.WriteLine(info);
        
        Console.ReadKey();
    }

The result is:  


<p align="center">
<img src="/images/post/20170529002.png" alt="result of anonymous class" width="70%"  /><br/>
<center><h5><b>Figure 1</b></h5></center>
</p>



## How to use annoymous type
**1.** Use var to define the anonymous type variables.  
**2.** Pass as the parameters of the method.  

In MVC, you will see the usage of this feature:  

<p align="center">
<img src="/images/post/20170529001.png" alt="annoymous type" width="70%"  /><br/>
<center><h5><b>Figure 2</b></h5></center>
</p>


***

Hope this article can help you.  
